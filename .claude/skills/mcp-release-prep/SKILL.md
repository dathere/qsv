---
name: mcp-release-prep
description: Prepare an MCP server release by bumping versions across all files and updating changelog
disable-model-invocation: true
---

# MCP Server Release Preparation

Prepare an MCP server release by updating version numbers across all required files and generating a changelog entry. The MCP server version advances **independently** of the qsv binary version.

## Arguments

- `version` (required): The new MCP server version number (e.g., "16.2.0")
- `minimum_qsv_version` (optional): New minimum qsv binary version, if changing

All paths below are relative to `.claude/skills/`.

## Version Bump Checklist

### Core (must always update)

1. **`package.json`** (line 3): `"version": "X.Y.Z"` — source of truth; `version.ts` reads this at runtime
2. **`manifest.json`** (line 4): `"version": "X.Y.Z"` — must match package.json
3. **`.claude-plugin/plugin.json`** (line 3): `"version": "X.Y.Z"`

### Conditional (only if minimum qsv binary version changes)

4. **`manifest.json`** (~line 250): `"minimum_qsv_version": "X.Y.Z"`

### Documentation (hardcoded versions to update)

5. **`README-MCP.md`** (~line 568): `**Version**: X.Y.Z`
6. **`docs/guides/MACOS-QUICK_START.md`** (~lines 121, 131, 469): download URL and footer version
7. **`docs/desktop/README-MCPB.md`** (~lines 23, 576): download URL and version badge
8. **`docs/guides/DESKTOP_EXTENSION.md`** (~line 606): add version history entry

## Changelog Entry

Add a new section at the top of `CHANGELOG.md` (in `.claude/skills/`) following this format:

```markdown
## [X.Y.Z] - YYYY-MM-DD

### Added
- (new features)

### Changed
- (changes to existing features)

### Fixed
- (bug fixes)
```

Use `git log --oneline --no-merges --grep="(mcp)" <last-tag>..HEAD` to populate — only commits with `(mcp)` in the title are relevant to MCP server releases.

## Verification Steps

After version bumps:

1. `npm run build` — TypeScript compilation succeeds
2. `npm test` — all tests pass
3. `npm run mcpb:package` — generates `qsv-mcp-server-X.Y.Z.mcpb`

## Important Notes

- MCP server version advances **independently** of qsv binary version
- `minimum_qsv_version` in manifest.json tracks binary compatibility, not server version
- Skill JSON files (`qsv/*.json`) are auto-generated by the **qsv binary** (`qsv --update-mcp-skills`), not by this skill — only bump those via `/release-prep`
- Update the `CLAUDE.md` **Document Version** and **Last Updated** fields if CLAUDE.md content changed in this release
- `version.ts` reads version from `package.json` at runtime — no need to edit `version.ts` directly
