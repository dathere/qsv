{
  "name": "qsv-diff",
  "version": "12.0.0",
  "description": "Find the difference between two CSVs with ludicrous speed. NOTE: diff does not support stdin. A file path is required for both arguments. Further, PRIMARY KEY VALUES MUST BE UNIQUE WITHIN EACH CSV. When diffing CSVs with just a single --key column and a stats cache is available, diff will automatically validate for primary key uniqueness. If more than one --key column is specified, however, this auto-validation is not done. To check if a CSV has unique primary key values, use `qsv extdedup` with the same key columns using the `--select` option: The duplicate count will be printed to stderr.",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "diff",
    "args": [
      {
        "name": "input-left",
        "type": "file",
        "required": true,
        "description": ""
      },
      {
        "name": "input-right",
        "type": "file",
        "required": true,
        "description": ""
      }
    ],
    "options": [
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "Set ALL delimiters to this character. Overrides --delimiter-right, --delimiter-left and --delimiter-output."
      },
      {
        "flag": "--delimiter-left",
        "type": "string",
        "description": "The field delimiter for reading CSV data on the left. Must be a single character. (default: ,)"
      },
      {
        "flag": "--delimiter-output",
        "type": "string",
        "description": "The field delimiter for writing the CSV diff result. Must be a single character. (default: ,)"
      },
      {
        "flag": "--delimiter-right",
        "type": "string",
        "description": "The field delimiter for reading CSV data on the right. Must be a single character. (default: ,)"
      },
      {
        "flag": "--drop-equal-fields",
        "type": "flag",
        "description": "Drop values of equal fields in modified rows of the CSV diff result (and replace them with the empty string). Key field values will not be dropped."
      },
      {
        "flag": "--force",
        "type": "flag",
        "description": "Force diff and ignore stats caches for the left & right CSVs. Otherwise, if available, the stats cache will be used to: * short-circuit the diff if their fingerprint hashes are identical. * check for primary key uniqueness when only one --key column is specified."
      },
      {
        "flag": "--help",
        "type": "flag",
        "description": "Display this message"
      },
      {
        "flag": "--jobs",
        "type": "string",
        "description": "The number of jobs to run in parallel. When not set, the number of jobs is set to the number of CPUs detected."
      },
      {
        "flag": "--key",
        "type": "string",
        "description": "The column indices that uniquely identify a record as a comma separated list of 0-based indices, e.g. 0,1,2 or column names, e.g. name,age. Note that when selecting columns by name, only the left CSV's headers are used to match the column names and it is assumed that the right CSV has the same selected column names in the same order as the left CSV. (default: 0)"
      },
      {
        "flag": "--no-headers-left",
        "type": "flag",
        "description": "When set, the first row will be considered as part of the left CSV to diff. (When not set, the first row is the header row and will be skipped during the diff. It will always appear in the output.)"
      },
      {
        "flag": "--no-headers-output",
        "type": "flag",
        "description": "When set, the diff result won't have a header row in its output. If not set and both CSVs have no headers, headers in the result will be: _col_1,_col_2, etc."
      },
      {
        "flag": "--no-headers-right",
        "type": "flag",
        "description": "When set, the first row will be considered as part of the right CSV to diff. (When not set, the first row is the header row and will be skipped during the diff. It will always appear in the output.)"
      },
      {
        "flag": "--output",
        "type": "string",
        "description": "Write output to <file> instead of stdout."
      },
      {
        "flag": "--sort-columns",
        "type": "string",
        "description": "The column indices by which the diff result should be sorted as a comma separated list of indices, e.g. 0,1,2 or column names, e.g. name,age. Records in the diff result that are marked as \"modified\" (\"delete\" and \"add\" records that have the same key, but have different content) will always be kept together in the sorted diff result and so won't be sorted independently from each other. Note that when selecting columns by name, only the left CSV's headers are used to match the column names and it is assumed that the right CSV has the same selected column names in the same order as the left CSV."
      }
    ]
  },
  "examples": [
    {
      "description": "qsv extdedup --select keycol data.csv --no-output",
      "command": "qsv extdedup --select keycol data.csv --no-output"
    },
    {
      "description": "left.csv right.csv",
      "command": "qsv diff left.csv right.csv"
    },
    {
      "description": "left.csv --no-headers-right right-noheaders.csv",
      "command": "qsv diff left.csv --no-headers-right right-noheaders.csv"
    },
    {
      "description": "--delimiter-left '\\t' left.csv right-tab.tsv",
      "command": "qsv diff --delimiter-left '\\t' left.csv right-tab.tsv"
    },
    {
      "description": "or ';' as the delimiter",
      "command": "qsv diff --delimiter-left ';' left.csv right-semicolon.csv"
    },
    {
      "description": "-o diff-tab.tsv --delimiter-output '\\t' left.csv right.csv",
      "command": "qsv diff -o diff-tab.tsv --delimiter-output '\\t' left.csv right.csv"
    },
    {
      "description": "or ';' as the delimiter",
      "command": "qsv diff -o diff-semicolon.csv --delimiter-output ';' left.csv right.csv"
    },
    {
      "description": "--key 0,1 left.csv right.csv",
      "command": "qsv diff --key 0,1 left.csv right.csv"
    },
    {
      "description": "-k 0,1 --sort-columns 0,1 left.csv right.csv",
      "command": "qsv diff -k 0,1 --sort-columns 0,1 left.csv right.csv"
    },
    {
      "description": "--drop-equal-fields left.csv right.csv",
      "command": "qsv diff --drop-equal-fields left.csv right.csv"
    },
    {
      "description": "--no-headers-output left.csv right.csv",
      "command": "qsv diff --no-headers-output left.csv right.csv"
    },
    {
      "description": "--no-headers-left --no-headers-right left.csv right.csv",
      "command": "qsv diff --no-headers-left --no-headers-right left.csv right.csv"
    }
  ],
  "hints": {
    "streamable": true,
    "memory": "constant"
  },
  "test_file": "https://github.com/dathere/qsv/blob/master/tests/test_diff.rs"
}