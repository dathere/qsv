{
  "name": "qsv-enumerate",
  "version": "12.0.0",
  "description": "Add a new column enumerating the lines of a CSV file. This can be useful to keep track of a specific line order, give a unique identifier to each line or even make a copy of the contents of a column. The enum function has four modes of operation: 1. INCREMENT. Add an incremental identifier to each of the lines: 2. UUID4. Add a uuid v4 to each of the lines: 3. UUID7. Add a uuid v7 to each of the lines: 3. CONSTANT. Create a new column filled with a given value: 4. COPY. Copy the contents of a column to a new one: 5. HASH. Create a new column with the deterministic hash of the given column/s. The hash uses the xxHash algorithm and is platform-agnostic. (see https://github.com/DoumanAsh/xxhash-rust for more information): Finally, you should also be able to shuffle the lines of a CSV file by sorting on the generated uuid4s: This will shuffle the lines of the file.csv file as uuids generated using the v4 specification are random and for practical purposes, are unique (1 in 2^122). See https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions However, sorting on uuid7 identifiers will not work as they are time-based and monotonically increasing, and will not shuffle the lines.",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "enumerate",
    "args": [],
    "options": [
      {
        "flag": "--new-column",
        "short": "-c",
        "type": "string",
        "description": "Name of the column to create. Will default to \"index\"."
      },
      {
        "flag": "--start",
        "type": "string",
        "description": "The value to start the enumeration from. Only applies in Increment mode. (default: 0)"
      },
      {
        "flag": "--increment",
        "type": "string",
        "description": "The value to increment the enumeration by. Only applies in Increment mode. (default: 1)"
      },
      {
        "flag": "--constant",
        "type": "string",
        "description": "Fill a new column with the given value. Changes the default column name to \"constant\" unless overridden by --new-column. To specify a null value, pass the literal \"<NULL>\"."
      },
      {
        "flag": "--copy",
        "type": "string",
        "description": "Name of a column to copy. Changes the default column name to \"{column}_copy\" unless overridden by --new-column."
      },
      {
        "flag": "--uuid4",
        "type": "flag",
        "description": "When set, the column will be populated with uuids (v4) instead of the incremental identifier. Changes the default column name to \"uuid4\" unless overridden by --new-column."
      },
      {
        "flag": "--uuid7",
        "type": "flag",
        "description": "When set, the column will be populated with uuids (v7) instead of the incremental identifier. uuid v7 is a time-based uuid and is monotonically increasing. See https://buildkite.com/blog/goodbye-integers-hello-uuids Changes the default column name to \"uuid7\" unless overridden by --new-column."
      },
      {
        "flag": "--hash",
        "type": "string",
        "description": "Create a new column filled with the hash of the given column/s. Use \"1-\" to hash all columns. Changes the default column name to \"hash\" unless overridden by --new-column. Will remove an existing \"hash\" column if it exists."
      },
      {
        "flag": "--help",
        "short": "-h",
        "type": "flag",
        "description": "Display this message"
      },
      {
        "flag": "--output",
        "short": "-o",
        "type": "string",
        "description": "Write output to <file> instead of stdout."
      },
      {
        "flag": "--no-headers",
        "short": "-n",
        "type": "flag",
        "description": "When set, the first row will not be interpreted as headers."
      },
      {
        "flag": "--delimiter",
        "short": "-d",
        "type": "string",
        "description": "The field delimiter for reading CSV data. Must be a single character. (default: ,)"
      }
    ]
  },
  "examples": [
    {
      "description": "qsv enum file.csv",
      "command": "qsv enum file.csv"
    },
    {
      "description": "qsv enum --uuid4 file.csv",
      "command": "qsv enum --uuid4 file.csv"
    },
    {
      "description": "qsv enum --uuid7 file.csv",
      "command": "qsv enum --uuid7 file.csv"
    },
    {
      "description": "qsv enum --constant 0",
      "command": "qsv enum --constant 0"
    },
    {
      "description": "qsv enum --copy names",
      "command": "qsv enum --copy names"
    },
    {
      "description": "qsv enum --hash 1- // hash all columns, auto-ignores existing \"hash\" column",
      "command": "qsv enum --hash 1- // hash all columns, auto-ignores existing \"hash\" column"
    },
    {
      "description": "qsv enum --hash col2,col3,col4 // hash specific columns",
      "command": "qsv enum --hash col2,col3,col4 // hash specific columns"
    },
    {
      "description": "qsv enum --hash col2 // hash a single column",
      "command": "qsv enum --hash col2 // hash a single column"
    },
    {
      "description": "qsv enum --hash /record_id|name|address/ // hash columns that match a regex",
      "command": "qsv enum --hash /record_id|name|address/ // hash columns that match a regex"
    },
    {
      "description": "qsv enum --hash !/record_id/ // hash all columns except the record_id column",
      "command": "qsv enum --hash !/record_id/ // hash all columns except the record_id column"
    },
    {
      "description": "qsv enum --uuid4 file.csv | qsv sort -s uuid4 > shuffled.csv",
      "command": "qsv enum --uuid4 file.csv | qsv sort -s uuid4 > shuffled.csv"
    }
  ],
  "hints": {
    "streamable": true,
    "memory": "constant"
  },
  "test_file": "https://github.com/dathere/qsv/blob/master/tests/test_enumerate.rs"
}