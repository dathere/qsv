{
  "name": "qsv-exclude",
  "version": "14.0.0",
  "description": "Removes a set of CSV data from another set based on the specified columns.",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "exclude",
    "args": [
      {
        "name": "columns1",
        "type": "string",
        "required": true,
        "description": ""
      },
      {
        "name": "input1",
        "type": "file",
        "required": true,
        "description": "is the file from which data will be removed."
      },
      {
        "name": "columns2",
        "type": "string",
        "required": true,
        "description": ""
      },
      {
        "name": "input2",
        "type": "file",
        "required": true,
        "description": "is the file containing the data to be removed from <input1> e.g. 'qsv exclude id records.csv id previously-processed.csv'"
      }
    ],
    "options": [
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "The field delimiter for reading CSV data. Must be a single character. (default: ,)"
      },
      {
        "flag": "--ignore-case",
        "type": "flag",
        "description": "When set, matching is done case insensitively."
      },
      {
        "flag": "--no-headers",
        "type": "flag",
        "description": "When set, the first row will not be interpreted as headers. (i.e., They are not searched, analyzed, sliced, etc.)"
      },
      {
        "flag": "--output",
        "type": "string",
        "description": "Write output to <file> instead of stdout."
      },
      {
        "flag": "-v",
        "type": "flag",
        "description": "When set, matching rows will be the only ones included, forming set intersection, instead of the ones discarded."
      }
    ]
  },
  "hints": {
    "streamable": true,
    "indexed": true,
    "memory": "constant"
  },
  "examples": [
    {
      "description": "Remove all records in previously-processed.csv from records.csv",
      "command": "qsv exclude id records.csv id previously-processed.csv"
    },
    {
      "description": "Remove all records in previously-processed.csv matching on multiple columns",
      "command": "qsv exclude col1,col2 records.csv col1,col2 previously-processed.csv"
    },
    {
      "description": "Remove all records in previously-processed.csv matching on column ranges",
      "command": "qsv exclude col1-col5 records.csv col1-col5 previously-processed.csv"
    },
    {
      "description": "Remove all records in previously-processed.csv with the same id from records.csv and write to new-records.csv",
      "command": "qsv exclude id records.csv id previously-processed.csv > new-records.csv"
    },
    {
      "description": "Remove all records in previously-processed.csv with the same id from records.csv and write to new-records.csv",
      "command": "qsv exclude id records.csv id previously-processed.csv --output new-records.csv"
    },
    {
      "description": "Get the intersection of records.csv and previously-processed.csv on id column (i.e., only records present in both files)",
      "command": "qsv exclude -v id records.csv id previously-processed.csv -o intersection.csv"
    },
    {
      "description": "Do a case insensitive exclusion on the id column",
      "command": "qsv exclude --ignore-case id records.csv id previously-processed.csv"
    },
    {
      "description": "Chain exclude with sort to create a new sorted records file without previously processed records",
      "command": "qsv exclude id records.csv id previously-processed.csv |  qsv sort > new-sorted-records.csv"
    },
    {
      "description": "Chain exclude with sort and dedup to create a new sorted deduped records file",
      "command": "qsv exclude id records.csv id previously-processed.csv | qsv sort |  qsv --sorted dedup > new-sorted-deduped-records.csv"
    }
  ]
}