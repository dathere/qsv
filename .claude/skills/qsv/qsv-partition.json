{
  "name": "qsv-partition",
  "version": "16.0.0",
  "description": "Partition a CSV based on a column value.",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "partition",
    "args": [
      {
        "name": "column",
        "type": "string",
        "required": true,
        "description": "The column to use as a key for partitioning. You can use the `--select` option to select the column by name or index, but only one column can be used for partitioning. See `select` command for more details."
      },
      {
        "name": "outdir",
        "type": "string",
        "required": true,
        "description": "The directory to write the output files to."
      },
      {
        "name": "input",
        "type": "file",
        "required": true,
        "description": "The CSV file to read from. If not specified, then the input will be read from stdin."
      }
    ],
    "options": [
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "The field delimiter for reading CSV data. Must be a single character. (default: ,)"
      },
      {
        "flag": "--drop",
        "type": "flag",
        "description": "Drop the partition column from results."
      },
      {
        "flag": "--filename",
        "type": "string",
        "description": "A filename template to use when constructing the names of the output files.  The string '{}' will be replaced by a value based on the partition column, but sanitized for shell safety.",
        "default": "{}.csv"
      },
      {
        "flag": "--limit",
        "type": "string",
        "description": "Limit the number of simultaneously open files. Useful for partitioning large datasets with many unique values to avoid \"too many open files\" errors. Data is processed in batches until all unique values are processed. If not set, it will be automatically set to the system limit with a 10% safety margin. If set to 0, it will process all data at once, regardless of the system's open files limit."
      },
      {
        "flag": "--no-headers",
        "type": "flag",
        "description": "When set, the first row will NOT be interpreted as column names. Otherwise, the first row will appear in all chunks as the header row."
      },
      {
        "flag": "--prefix-length",
        "type": "string",
        "description": "Truncate the partition column after the specified number of bytes when creating the output file."
      }
    ]
  },
  "hints": {
    "streamable": true,
    "memory": "constant"
  }
}