{
  "name": "qsv-sample",
  "version": "14.0.0",
  "description": "Randomly draw rows (with optional seed) from a CSV using seven different sampling methods - reservoir (default), indexed, bernoulli, systematic, stratified, weighted & cluster sampling. Supports sampling from CSVs on remote URLs.",
  "category": "selection",
  "command": {
    "binary": "qsv",
    "subcommand": "sample",
    "args": [
      {
        "name": "sample-size",
        "type": "number",
        "required": true,
        "description": "When using INDEXED, RESERVOIR or WEIGHTED sampling, the sample size. Can either be a whole number or a value between value between 0 and 1. If a fraction, specifies the sample size as a percentage of the population. (e.g. 0.15 - 15 percent of the CSV) When using BERNOULLI sampling, the probability of selecting each record (between 0 and 1). When using SYSTEMATIC sampling, the integer part is the interval between records to sample & the fractional part is the percentage of the population to sample. When there is no fractional part, it will select every nth record for the entire population. When using STRATIFIED sampling, the stratum sample size. When using CLUSTER sampling, the number of clusters. When using TIMESERIES sampling, the interval number (treated as hours by default, e.g., 1 = 1 hour). Use --ts-interval for custom intervals like \"1d\" (daily), \"1w\" (weekly), \"1m\" (monthly), \"1y\" (yearly), etc."
      },
      {
        "name": "input",
        "type": "file",
        "required": true,
        "description": "The CSV file to sample. This can be a local file, stdin, or a URL (http and https schemes supported)."
      }
    ],
    "options": [
      {
        "flag": "--bernoulli",
        "type": "flag",
        "description": "Use Bernoulli sampling instead of indexed or reservoir sampling. When this flag is set, <sample-size> must be between 0 and 1 and represents the probability of selecting each record."
      },
      {
        "flag": "--cluster",
        "type": "string",
        "description": "Use cluster sampling. The cluster column is specified by <col>. Can be either a column name or 0-based column index. Uses MEMORY PROPORTIONAL to the number of clusters (c) - O(c)."
      },
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "The field delimiter for reading/writing CSV data. Must be a single character. (default: ,)"
      },
      {
        "flag": "--force",
        "type": "flag",
        "description": "Do not use stats cache, even if its available."
      },
      {
        "flag": "--max-size",
        "type": "string",
        "description": "Maximum size of the file to download in MB before sampling. Will download the entire file if not specified. If the CSV is partially downloaded, the sample will be taken only from the downloaded portion."
      },
      {
        "flag": "--no-headers",
        "type": "flag",
        "description": "When set, the first row will be considered as part of the population to sample from. (When not set, the first row is the header row and will always appear in the output.)"
      },
      {
        "flag": "--output",
        "type": "string",
        "description": "Write output to <file> instead of stdout."
      },
      {
        "flag": "--rng",
        "type": "string",
        "description": "The Random Number Generator (RNG) algorithm to use. Three RNGs are supported:",
        "default": "standard"
      },
      {
        "flag": "--seed",
        "type": "string",
        "description": "Random Number Generator (RNG) seed."
      },
      {
        "flag": "--stratified",
        "type": "string",
        "description": "Use stratified sampling. The strata column is specified by <col>. Can be either a column name or 0-based column index. The sample size must be a whole number. Uses MEMORY PROPORTIONAL to the number of strata (s) and samples per stratum (k) - O(s*k)."
      },
      {
        "flag": "--systematic",
        "type": "string",
        "description": "Use systematic sampling (every nth record as specified by <sample-size>). If <arg> is \"random\", the starting point is randomly chosen between 0 & n. If <arg> is \"first\", the starting point is the first record. The sample size must be a whole number. Uses CONSTANT memory - O(1)."
      },
      {
        "flag": "--timeout",
        "type": "string",
        "description": "Timeout for downloading URLs in seconds. If 0, no timeout is used.",
        "default": "30"
      },
      {
        "flag": "--timeseries",
        "type": "string",
        "description": "Use time-series sampling. The time column is specified by <col>. Can be either a column name or 0-based column index. Sorts records by the specified time column and then groups by time intervals and selects one record per interval. Supports various date formats (19 formats recognized by qsv-dateparser). Uses MEMORY PROPORTIONAL to the number of records - O(n)."
      },
      {
        "flag": "--ts-adaptive",
        "type": "string",
        "description": "Adaptive sampling mode for time-series data. Options: \"business-hours\" (prefer 9am-5pm Mon-Fri), \"weekends\" (prefer weekends), \"business-days\" (prefer weekdays), \"both\" (combine business-hours and weekends)."
      },
      {
        "flag": "--ts-aggregate",
        "type": "string",
        "description": "Aggregation function to apply within each time interval. Options: \"first\", \"last\", \"mean\", \"sum\", \"count\", \"min\", \"max\", \"median\". When specified, aggregates all records in each interval instead of selecting a single record."
      },
      {
        "flag": "--ts-input-tz",
        "type": "string",
        "description": "Timezone for parsing input timestamps. Can be an IANA timezone name or \"local\" for the local timezone.",
        "default": "UTC"
      },
      {
        "flag": "--ts-interval",
        "type": "number",
        "description": "Time interval for grouping records. Format: <number><unit> where unit is h (hour), d (day), w (week), m (month), y (year). Examples: \"1h\", \"1d\", \"1w\", \"2d\" (every 2 days). If not specified, <sample-size> is treated as hours."
      },
      {
        "flag": "--ts-prefer-dmy",
        "type": "flag",
        "description": "Prefer to parse dates in dmy format. Otherwise, use mdy format."
      },
      {
        "flag": "--ts-start",
        "type": "string",
        "description": "Starting point for time-series sampling. Options: \"first\" (earliest timestamp, default), \"last\" (most recent timestamp), \"random\" (random starting point).",
        "default": "first"
      },
      {
        "flag": "--weighted",
        "type": "string",
        "description": "Use weighted sampling. The weight column is specified by <col>. Can be either a column name or 0-based column index. The column will be parsed as a number. Records with non-number weights will be skipped. Uses MEMORY PROPORTIONAL to the sample size (k) - O(k)."
      }
    ]
  },
  "hints": {
    "streamable": true,
    "indexed": true,
    "memory": "constant"
  }
}