{
  "name": "qsv-sniff",
  "version": "15.0.1",
  "description": "Quickly sniff & infer CSV metadata (delimiter, header row, preamble rows, quote character, flexible, is_utf8, average record length, number of records, content length & estimated number of records if sniffing a CSV on a URL, number of fields, field names & data types). It is also a general mime type detector.",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "sniff",
    "args": [
      {
        "name": "input",
        "type": "file",
        "required": true,
        "description": "The file to sniff. This can be a local file, stdin or a URL (http and https schemes supported)."
      }
    ],
    "options": [
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "The delimiter for reading CSV data. Specify this when the delimiter is known beforehand, as the delimiter inferencing algorithm can sometimes fail. Must be a single ascii character."
      },
      {
        "flag": "--harvest-mode",
        "type": "flag",
        "description": "This is a convenience flag when using sniff in CKAN harvesters. It is equivalent to --quick --timeout 10 --stats-types --json and --user-agent \"CKAN-harvest/$QSV_VERSION ($QSV_TARGET; $QSV_BIN_NAME)\""
      },
      {
        "flag": "--json",
        "type": "flag",
        "description": "Return results in JSON format."
      },
      {
        "flag": "--just-mime",
        "type": "flag",
        "description": "Only return the file's mime type. Use this to use sniff as a general mime type detector. Synonym for --no-infer."
      },
      {
        "flag": "--no-infer",
        "type": "flag",
        "description": "Do not infer the schema. Only return the file's mime type, size and last modified date. Use this to use sniff as a general mime type detector. Note that CSV and TSV files will only be detected as mime type plain/text in this mode."
      },
      {
        "flag": "--prefer-dmy",
        "type": "flag",
        "description": "Prefer to parse dates in dmy format. Otherwise, use mdy format. Ignored when --no-infer is enabled."
      },
      {
        "flag": "--pretty-json",
        "type": "flag",
        "description": "Return results in pretty JSON format."
      },
      {
        "flag": "--quick",
        "type": "flag",
        "description": "When sniffing a non-CSV remote file, only download the first chunk of the file before attempting to detect the mime type. This is faster but less accurate as some mime types cannot be detected with just the first downloaded chunk."
      },
      {
        "flag": "--quote",
        "type": "string",
        "description": "The quote character for reading CSV data. Specify this when the quote character is known beforehand, as the quote char inferencing algorithm can sometimes fail. Must be a single ascii character - typically, double quote (\"), single quote ('), or backtick (`)."
      },
      {
        "flag": "--sample",
        "type": "string",
        "description": "First n rows to sample to sniff out the metadata. When sample size is between 0 and 1 exclusive, it is treated as a percentage of the CSV to sample (e.g. 0.20 is 20 percent). When it is zero, the entire file will be sampled. When the input is a URL, the sample size dictates how many lines to sample without having to download the entire file. Ignored when --no-infer is enabled.",
        "default": "1000"
      },
      {
        "flag": "--save-urlsample",
        "type": "string",
        "description": "Save the URL sample to a file. Valid only when input is a URL."
      },
      {
        "flag": "--stats-types",
        "type": "flag",
        "description": "Use the same data type names as `stats`. (Unsigned, Signed => Integer, Text => String, everything else the same)"
      },
      {
        "flag": "--timeout",
        "type": "string",
        "description": "Timeout when sniffing URLs in seconds. If 0, no timeout is used.",
        "default": "30"
      }
    ]
  },
  "hints": {
    "streamable": true,
    "indexed": true,
    "memory": "constant"
  },
  "examples": [
    {
      "description": "Sniff a local CSV file",
      "command": "qsv sniff data.csv"
    },
    {
      "description": "Sniff a remote TSV file over HTTPS",
      "command": "qsv sniff https://example.com/data.tsv"
    },
    {
      "description": "Get the mime type of a remote file without inferring the CSV schema",
      "command": "qsv sniff --no-infer https://example.com/data.xlsx"
    },
    {
      "description": "Sniff the first 20 percent of a SSV file",
      "command": "qsv sniff --sample 0.20 data.ssv"
    }
  ]
}