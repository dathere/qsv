{
  "name": "qsv-template",
  "version": "14.0.0",
  "description": "Renders a template using CSV data with the Mini Jinja template engine (Example).",
  "category": "utility",
  "command": {
    "binary": "qsv",
    "subcommand": "template",
    "args": [
      {
        "name": "input",
        "type": "file",
        "required": true,
        "description": "The CSV file to read. If not given, input is read from STDIN."
      },
      {
        "name": "outdir",
        "type": "string",
        "required": true,
        "description": "/0003/3001.txt through <outdir>/0003/4000.txt template options:"
      }
    ],
    "options": [
      {
        "flag": "--batch",
        "type": "string",
        "description": "The number of rows per batch to load into memory, before running in parallel. Set to 0 to load all rows in one batch.",
        "default": "50000"
      },
      {
        "flag": "--cache-dir",
        "type": "string",
        "description": "The directory to use for caching downloaded lookup resources. If the directory does not exist, qsv will attempt to create it. If the QSV_CACHE_DIR envvar is set, it will be used instead.",
        "default": "~/.qsv-cache"
      },
      {
        "flag": "--ckan-api",
        "type": "string",
        "description": "The URL of the CKAN API to use for downloading lookup resources with the \"ckan://\" scheme. If the QSV_CKAN_API envvar is set, it will be used instead.",
        "default": "https://data.dathere.com/api/3/action"
      },
      {
        "flag": "--customfilter-error",
        "type": "string",
        "description": "The value to return when a custom filter returns an error. Use \"<empty string>\" to return an empty string.",
        "default": "<FILTER_ERROR>"
      },
      {
        "flag": "--delimiter",
        "type": "string",
        "description": "Field separator for reading CSV",
        "default": ","
      },
      {
        "flag": "--globals-json",
        "type": "string",
        "description": "A JSON file containing global variables to make available in templates. The JSON properties can be accessed in templates using the \"qsv_g\" namespace (e.g. {{qsv_g.school_name}}, {{qsv_g.year}}). This allows sharing common values across all template renders."
      },
      {
        "flag": "--no-headers",
        "type": "flag",
        "description": "When set, the first row will not be interpreted as headers. Templates must use numeric 1-based indices with the \"_c\" prefix.(e.g. col1: {{_c1}} col2: {{_c2}})"
      },
      {
        "flag": "--outfilename",
        "type": "string",
        "description": "MiniJinja template string to use to create the filename of the output files to write to <outdir>. If set to just QSV_ROWNO, the filestem is set to the current rowno of the record, padded with leading zeroes, with the \".txt\" extension (e.g. 001.txt, 002.txt, etc.) Note that all the fields, including QSV_ROWNO, are available when defining the filename template.",
        "default": "QSV_ROWNO"
      },
      {
        "flag": "--output",
        "type": "string",
        "description": "Write output to <file> instead of stdout"
      },
      {
        "flag": "--outsubdir-size",
        "type": "string",
        "description": "The number of files per subdirectory in <outdir>.",
        "default": "1000"
      },
      {
        "flag": "--progressbar",
        "type": "flag",
        "description": "Show progress bars. Not valid for stdin."
      },
      {
        "flag": "--template",
        "type": "string",
        "description": "MiniJinja template string to use (alternative to --template-file)"
      },
      {
        "flag": "--template-file",
        "type": "string",
        "description": "MiniJinja template file to use"
      },
      {
        "flag": "--timeout",
        "type": "string",
        "description": "Timeout for downloading lookups on URLs.",
        "default": "30"
      }
    ]
  },
  "hints": {
    "streamable": true,
    "indexed": true,
    "memory": "constant"
  }
}